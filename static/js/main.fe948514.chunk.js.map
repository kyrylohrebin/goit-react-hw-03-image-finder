{"version":3,"sources":["Components/ImageGalleryItem/ImageGalleryItem.module.css","Components/Modal/Modal.module.css","App.module.css","Components/ImageGallery/ImageGallery.module.css","Components/Button/Button.module.css","service/Api.js","Components/Searchbar/Searchbar.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Button/Button.js","Components/Loader/Loader.js","Components/Modal/Modal.js","App.js","index.js","Components/Searchbar/Searchbar.module.css"],"names":["module","exports","key","query","page","a","Axios","get","response","data","Error","api","SearchBar","state","handleChange","event","setState","target","value","handleSubmit","preventDefault","onSearch","props","className","styles","Searchbar","SearchForm","onSubmit","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","imageSrc","imageUrl","handler","src","alt","data-url","ImageGalleryItem_image","onClick","ImageGallery","images","onImageClick","map","image","webformatURL","largeImageURL","id","Button","onClickHandler","SpinLoader","color","height","width","timeout","modalRoot","document","querySelector","Modal","handlerKeyDown","code","onCloseModal","onOverlayClick","currentTarget","window","addEventListener","removeEventListener","createPortal","Overlay","children","App","pageNumber","isLoading","error","totalPages","newPageCords","modalSrc","fetchData","prevState","hits","Math","ceil","totalHits","scrollToNextPage","scrollTo","top","behavior","loadMore","cords","documentElement","scrollHeight","url","dataset","prevProps","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fe948514.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2UBrF\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1HU2Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1kbHe\",\"Modal\":\"Modal_Modal__3kfco\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3WVYp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__7LpNJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1Fvf9\"};","import Axios from 'axios';\r\n\r\nconst key = '18662312-a5f7d9a00f5eb78409595edb4';\r\n\r\nasync function api(query, page) {\r\n  try {\r\n    const response = await Axios.get(\r\n      `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=12&key=${key}`,\r\n    );\r\n    const { data } = response;\r\n    return data;\r\n  } catch (error) {\r\n    throw new Error(error);\r\n  }\r\n}\r\n\r\nexport default api;\r\n","import React, { Component } from 'react';\r\n\r\nimport styles from './Searchbar.module.css';\r\n\r\nclass SearchBar extends Component {\r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleChange = event => {\r\n    this.setState({\r\n      query: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { query } = this.state;\r\n    const { onSearch } = this.props;\r\n    onSearch(query);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={styles.SearchFormButton}>\r\n            <span className={styles.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n          <input\r\n            className={styles.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBar;\r\n","import styles from './ImageGalleryItem.module.css';\r\n\r\nfunction ImageGalleryItem({ imageSrc, imageUrl, handler }) {\r\n  return (\r\n    <li className={styles.ImageGalleryItem}>\r\n      <img\r\n        src={imageSrc}\r\n        alt=\"\"\r\n        data-url={imageUrl}\r\n        className={styles.ImageGalleryItem_image}\r\n        onClick={handler}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n","import styles from './ImageGallery.module.css';\r\n\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nfunction ImageGallery({ images, onImageClick }) {\r\n  return (\r\n    <ul className={styles.ImageGallery}>\r\n      {images.map(image => {\r\n        const { webformatURL, largeImageURL, id } = image;\r\n        return (\r\n          <ImageGalleryItem\r\n            key={id}\r\n            imageSrc={webformatURL}\r\n            imageUrl={largeImageURL}\r\n            handler={onImageClick}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default ImageGallery;\r\n","import styles from './Button.module.css';\r\n\r\nfunction Button({ onClickHandler }) {\r\n  return (\r\n    <button className={styles.Button} onClick={onClickHandler}>\r\n      Load more...\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","import Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nfunction SpinLoader() {\r\n  return (\r\n    <Loader\r\n      type=\"ThreeDots\"\r\n      color=\"#00BFFF\"\r\n      height={100}\r\n      width={100}\r\n      timeout={3000}\r\n    />\r\n  );\r\n}\r\n\r\nexport default SpinLoader;\r\n","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nimport styles from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handlerKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handlerKeyDown);\r\n  }\r\n\r\n  handlerKeyDown = ({ code }) => {\r\n    if (code === 'Escape') {\r\n      this.props.onCloseModal();\r\n    }\r\n  };\r\n\r\n  onOverlayClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onCloseModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={styles.Overlay} onClick={this.onOverlayClick}>\r\n        <div className={styles.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\n\r\nimport api from './service/Api';\r\nimport styles from './App.module.css';\r\n\r\nimport Searchbar from './Components/Searchbar/Searchbar';\r\nimport ImageGallery from './Components/ImageGallery/ImageGallery';\r\nimport Button from './Components/Button/Button';\r\nimport SpinLoader from './Components/Loader/Loader';\r\nimport Modal from './Components/Modal/Modal';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    query: '',\r\n    pageNumber: 1,\r\n    isLoading: false,\r\n    error: false,\r\n    images: [],\r\n    totalPages: 0,\r\n    newPageCords: 0,\r\n    modalSrc: '',\r\n  };\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { query, pageNumber } = this.state;\r\n    if (prevState.query !== query) {\r\n      this.fetchData();\r\n    }\r\n    if (\r\n      prevState.pageNumber !== pageNumber &&\r\n      prevState.pageNumber < pageNumber\r\n    ) {\r\n      await this.fetchData();\r\n      this.scrollToNextPage();\r\n    }\r\n  }\r\n\r\n  fetchData = async () => {\r\n    const { query, pageNumber } = this.state;\r\n    try {\r\n      const data = await api(query, pageNumber);\r\n      this.setState(prevState => ({\r\n        images: [...prevState.images, ...data.hits],\r\n        isLoading: false,\r\n        totalPages:\r\n          prevState.totalPages > 0\r\n            ? prevState.totalPages\r\n            : Math.ceil(data.totalHits / 12),\r\n      }));\r\n    } catch (error) {\r\n      this.setState({\r\n        error: true,\r\n        isLoading: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  scrollToNextPage = () => {\r\n    const { newPageCords } = this.state;\r\n    window.scrollTo({\r\n      top: newPageCords,\r\n      behavior: 'smooth',\r\n    });\r\n  };\r\n\r\n  onSearch = query => {\r\n    this.setState({\r\n      query: query,\r\n      pageNumber: 1,\r\n      isLoading: true,\r\n      error: false,\r\n      images: [],\r\n      totalPages: 0,\r\n      newPageCords: 0,\r\n    });\r\n  };\r\n\r\n  loadMore = () => {\r\n    const cords = document.documentElement.scrollHeight - 170;\r\n    this.setState(prevState => ({\r\n      isLoading: true,\r\n      newPageCords: cords,\r\n      pageNumber: prevState.pageNumber + 1,\r\n    }));\r\n  };\r\n\r\n  onImageClick = event => {\r\n    const {\r\n      dataset: { url },\r\n    } = event.target;\r\n    this.setState({\r\n      modalSrc: url,\r\n    });\r\n  };\r\n\r\n  onCloseModal = () => {\r\n    this.setState({\r\n      modalSrc: '',\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { images, pageNumber, totalPages, isLoading, modalSrc } = this.state;\r\n    return (\r\n      <div className={styles.App}>\r\n        <Searchbar onSearch={this.onSearch} />\r\n        {images.length > 0 && (\r\n          <ImageGallery images={images} onImageClick={this.onImageClick} />\r\n        )}\r\n        {isLoading && <SpinLoader />}\r\n        {pageNumber < totalPages && <Button onClickHandler={this.loadMore} />}\r\n        {modalSrc && (\r\n          <Modal onCloseModal={this.onCloseModal}>\r\n            <img src={modalSrc} alt=\"\" />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3f11L\",\"SearchForm\":\"Searchbar_SearchForm__2vh3m\",\"SearchFormButton\":\"Searchbar_SearchFormButton__5ynC4\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1BCVS\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1jt5Q\"};"],"sourceRoot":""}